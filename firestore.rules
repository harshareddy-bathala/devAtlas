rules_version = '2';

// DevOrbit Firestore Security Rules
// IMPORTANT: All client access is BLOCKED. All operations must go through the backend API.
// The backend uses Firebase Admin SDK which bypasses these rules.

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Block ALL direct client access to every collection
    // Admin SDK (backend) bypasses these rules entirely
    match /{document=**} {
      allow read: if false;
      allow write: if false;
    }
    
    // Explicitly block user data access from clients
    match /users/{userId} {
      allow read: if false;
      allow write: if false;
    }
    
    // Explicitly block skills collection
    match /users/{userId}/skills/{skillId} {
      allow read: if false;
      allow write: if false;
    }
    
    // Explicitly block projects collection
    match /users/{userId}/projects/{projectId} {
      allow read: if false;
      allow write: if false;
    }
    
    // Explicitly block resources collection
    match /users/{userId}/resources/{resourceId} {
      allow read: if false;
      allow write: if false;
    }
    
    // Explicitly block activities collection
    match /users/{userId}/activities/{activityId} {
      allow read: if false;
      allow write: if false;
    }
    
    // Block any other potential collections
    match /skills/{skillId} {
      allow read: if false;
      allow write: if false;
    }
    
    match /projects/{projectId} {
      allow read: if false;
      allow write: if false;
    }
    
    match /resources/{resourceId} {
      allow read: if false;
      allow write: if false;
    }
    
    match /activities/{activityId} {
      allow read: if false;
      allow write: if false;
    }
  }
}
